{% extends "base.html" %} {% load markdown_deux_tags %} {% block content %}
<br />
<form action="" method="GET">
<div class="col-lg-6">
    <div class="input-group">
      <input type="text" class="form-control" name ='q' placeholder="Search for..."  value="{{request.GET.q}}">
      <span class="input-group-btn">
        <button class="btn btn-info"type="submit"><i class="fa fa-search" aria-hidden="true"></i></button>
      </span>
    </div><!-- /input-group -->
  </div><!-- /.col-lg-6 -->
</form>
<div class="row">
  {% for post in posts %}
  <div class="col-sm-8">
    <div class="thumbnail">
      <div class="caption card pl-3 mt-2 pt-5">
        <h1>
          <a href="{{ post.get_absolute_url }} "> {{ post.title }}</a>
        </h1>
        <small>{{ post.timestamp | timesince }} ago</small>
        {% if post.image %}
        <img src="{{ post.image.url }}" class="img-fluid ml-2 mr-4 mt-2 mb-2" />
        {% endif %} {% if post.user %}
        <p>Author : {{ post.user }}</p>
        {% endif %}
        <p id="content" class="content-markdown">
          {{ post.content | markdown |linebreaks|truncatechars_html:150 }}
        </p>
        <script
          src="http://code.jquery.com/jquery-3.3.1.min.js"
          integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
          crossorigin="anonymous"
        ></script>
        <script type="text/javascript">
          $("img").addClass("img-fluid");
        </script>
        <p>
          <a href="{{ post.get_absolute_url }}" class="btn btn-primary">View</a>
        </p>
      </div>
    </div>
  </div>

  {% endfor %}
  <div class="pagination mb-5 col-sm-6">
    <span class="step-links">
      {% if posts.has_previous %}
      <a href="?page=1">&laquo; first</a>
      <a href="?page={{ posts.previous_page_number }}">previous</a>
      {% endif %}

      <span class="current">
        Page {{ posts.number }} of {{ posts.paginator.num_pages }}.
      </span>

      {% if posts.has_next %}
      <a href="?page={{ posts.next_page_number }} ">next</a>
      <a href="?page={{ posts.paginator.num_pages }}">last &raquo;</a>
      {% endif %}
    </span>
  </div>
</div>
{% endblock content %}
